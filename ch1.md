## 第一章 概述

### 1.1 计算计算机网络在信息时代的作用

互联网之所以能够向用户提供许多服务，就是因为互联网具有两个重要基本特点：即<mark>连通性</mark>和<mark>共享性</mark>

### 1.2 互联网概述

1. 互联网起源于美国
2. 计算机网络（简称网络），由若干结点和连接这些结点的链路组成，其中结点可以是计算机、集线器、交换机或路由器等
3. 互联网基础结构发展的三个阶段：第一阶段是单个网络ARPANET向互联网发展的过程，第二阶段是建成三级结构的互联网，第三阶段是逐渐形成多层次ISP结构的互联网
4. internet是泛指的词，可以指代由多个计算机网络互联而成的计算机网络。而Internet则是专有名词，代表前身是APRANET的全球最大、开放的由众多网络连接而成的特定互联网
5. ISP全称Internet Service Provider，如中国电信，中国联通，都是ISP
6. ISP根据层次高低分为主干ISP、地区ISP和本地ISP，为了减轻主干ISP的负担，在地区ISP间建立了链路，将这个称谓IXP互联网交换点

### 1.3 互联网的组成

1. 计算机之间的通信：主机A的某个进程和主机B的另一个进程进行通信。
2. 互联网分为边缘部分和核心部分，其中核心部分由大量网络和连接这些网络的路由器组成，此部分为边缘部分提供服务（交换和连通性）边缘部分就是主机（这些主机又被称作端系统end system），是用户直接使用的部分
3. 端系统可以是联网传感器，智能手机，普通pc，大型计算机。端系统的拥有者可以是个人也可以是单位（学校，企业），还可以是ISP
4. 端系统间的通信模式通常划分为两大类，C/S和P2P，B/S是C/S的特例
    - C/S
        - C/S中客户是服务请求方，服务器是服务提供方
        - C/S中的服务器程序<mark>可同时处理</mark>多个远地或本地客户的请求
        - 客户与服务器的通信关系建立后，通信可以是双向的，双方都可以发送或接收数据
    - P2P-对等连接方式
        - 两台主机在通讯时并不区分哪一个是服务请求方哪一个是服务提供方，只要两台主机都运行了对等的连接软件，他们就可以进行平等的对等连接通信。此时双方都可以下载对方的共享文件，将这种工作方式称为P2P方式.P2P内部每个连接仍是C/S连接
5. 网络核心部分是互联网中最复杂的部分，而在网络核心部分起特殊作用的是路由器，路由器是实现<mark><b>分组交换</b></mark>的关键构件
6. 互联网核心部分的路由器之间一般都使用高速链路相连接，而网络边缘的主机接入到核心部分则通常以相对较低速率的链路相连接
7. 拿电话网络举例，交换就是转接，把一条电话线转接到另一条电话线上，使他们连通起来，从通信资源的角度，交换就是按照某种方式动态地分配传输线路的资源
    - 电路交换
        - 电路交换必定是面向连接的
        - 使用电路交换来传送计算机数据时，线路的传输效率往往很低。
    - 分组交换
        - 采用存储转发技术
        - <u>要发送的整块数据称为报文</u>，在发送端，将较长的报文划分成较短的、等长的数据段，在每个数据段前面加上必要的控制信息(首部header)后，就构成了一个分组（packet），分组又称为包，分组的首部可称为“包头”。
        - 接受端收到分组后剥去首部还原成报文
        - 优点是<mark>高效灵活 迅速可靠</mark>缺点是<mark>存在延时和额外开销</mark>
    - 报文交换
        - 较分组交换灵活度不够，延时较长。
    - 三种交换方式：
        - 电路交换：整个报文的比特流连续地从源头直达终点，好像在一个管道中传送。
        - 报文交换：整个报文先传送到相邻结点，全部存储下来后查找转发表，转发到下一个结点
        - 分组交换：单一分组（这只是整个报文的一部分）传送到相邻结点，存储下来后查找转发表，转发到下一个结点，下一个分组同样操作，直到整个报文分组全部发送
        - 比较：
            - 若要连续传送大量数据，且传送时间远大于建立连接的时间，则电路交换的传输效率较快
            - 报文交换和分组交换不需要预先分配传输带宽，在传送突发数据的时候可提高整个网络的信道利用率。
            - 由于一个分组的长度常远小于整个报文的长度，因此分组交换比报文交换的时延小，同时灵活性更高。
        - <mark>三种方式的各自优缺点</mark>
            - 电路交换方式：
                - 缺点：网络带宽利用率不高，一旦故障，数据全部丢失。
                - 优点：为用户提供足够的带宽，时延小，交换设备成本较低
            - 报文交换方式：
                - 缺点：报文差异较大，时延差异大，分配缓存区空间大小困难.数据量大的时候容易导致数据丢失。
                - 优点：不需要预先分配传输带宽，网络的信道利用率高
            - 分组交换方式：
                - 缺点：时延较大，存在额外开销（见👆分组交换处的优缺点）
                - 优点：通信前不需要建立连接，每个结点首先将前一节点送来的分组手下并保存，再选择合适路径进行传送，电路利用率高。<mark>高效灵活 迅速可靠</mark>

### 1.6 计算机网络的性能

1. 速率是计算机网络中最重要的一个性能指标，单位是bit/s，速率往往是指额定速率或标称速率，非实际运行速率
2. 带宽在计算机网络中用来表示某通道传送数据的能力。表示在单位时间内网络中某信道所能通过的“最高数据率”，单位也是bit/s。一条通信链路的带宽越宽，其所能传输的最高数据率也最高
3. 吞吐量是实际有多少数据量能通过网络。吞吐量受网络的带宽或网络的额定速率的限制
4. 时延也称为延迟或者迟延，计算公式是 发送时延=数据帧长度（bit，指数据的总量）／发送速率（bit/s）

    总时延=发送时延+传播时延+处理时延+排队时延
5. 时延带宽积，计算公式为时延带宽积=传播时延*带宽
6. 往返时间
7. 利用率。利用率并不是越大越好，信道或网络的利用率过高会产生非常大的时延

### 1.7计算机网络体系结构

1. 对于国际标准，法律上的（de jure）国际标准OSI并没有得到广泛应用。非国际标准的TCP/IP成为了事实上（de facto）的国际标准
2. <mark>网络协议的三要素</mark>
    - 语法--数据与控制信息的结构或格式
    - 语义--即需要发出何种控制信息，完成何种动作以及作出何种响应
    - <mark>同步--即事实实现顺序的详细说明</mark>
网络协议是计算机网络的不可缺少的组成部分。
3. 协议通常以两种形式存在：文字描述和程序代码
4. 协议和服务存在概念上的区别
    - 协议的实现保证了能够向上一层提供服务。使用本层服务的实体只能看见服务而无法看见下面的协议。也就是说，<mark>下面的协议对上面的实体是透明的</mark>。
    - 协议是“水平的”，即协议是控制对等实体之间通信的规则。但服务是“垂直的”，即服务是由下层向上层通过层口接口提供的。
5. 
```
OSI七层模型：应用层（7）-表示层-会话层-运输层-网络层---数据链路层-物理层（1）===【物联网运回表鹰】
               |                    |      |       | 
TCP/IP四层模型：应用层-----------------运输层-网际层IP-网络接口层------====【营运往往】
                |                    |     |       |
五层协议模型：   应用层-----------------运输层-网络层---数据链路层-物理层====【物联网船鹰】
```
6. 实体：表示任何发送或接收信息的硬件或软件进程。协议：控制两个对等实体（或多个实体）进行通信的规则的集合
7. 在同一系统中相邻两层的实体进行交换信息的地方称为服务访问点（service accessing point）
8. OSI把层与层之间交换的数据的单位称为服务数据单元（service data unit）
9. 主机1向主机2发送数据的过程：
```
    主机1-应用进程数据先传送到应用层
        -->加上应用层首部，成为应用层 PDU【PDU (Protocol Data Unit)：协议数据单元。OSI 参考模型把对等层次之间传送的数据单位称为该层的协议数据单元 PDU。】
        -->应用层 PDU 再传送到运输层,加上运输层首部，成为运输层报文
        -->运输层报文再传送到网络层,加上网络层首部，成为 IP 数据报（或分组）
        -->IP 数据报再传送到数据链路层,加上链路层首部和尾部，成为数据链路层帧
        -->数据链路层帧再传送到物理层,最下面的物理层把比特流传送到物理媒体
        -->电信号（或光信号）在物理媒体中传播,从发送端物理层传送到接收端物理层
        =========================================================================
        物理层接收到比特流，上交给数据链路层<--
        数据链路层剥去帧首部和帧尾部,取出数据部分，上交给网络层<--
        网络层剥去首部，取出数据部分上交给运输层<--
        运输层剥去首部，取出数据部分上交给应用层<--
        应用层剥去首部，取出应用程序数据上交给应用进程<--
    主机2收到了 主机1 发来的应用程序数据！
------------------------------------------------------------------------------------------------------------------
主机1-应用数据  【应用程序数据】
-应用层        【应用层首部】【应用程序数据】
-运输层        【运输层首部】【应用层首部】【应用程序数据】
-网络层        【网络层首部】【运输层首部】【应用层首部】【应用程序数据】
-链路层        「链路层首部」【网络层首部】【运输层首部】【应用层首部】【应用程序数据】「链路层尾部」
-物理层
=物理线路===================================================================================
-物理层
-链路层        「链路层首部」【网络层首部】【运输层首部】【应用层首部】【应用程序数据】「链路层尾部」
-网络层        【网络层首部】【运输层首部】【应用层首部】【应用程序数据】
-运输层        【运输层首部】【应用层首部】【应用程序数据】
-应用层        【应用层首部】【应用程序数据】
主机2-收到应用数据  【应用程序数据】✓
```